<div class="page-container">
  <app-card-base width="auto" height="auto">
    <div class="btn-to-back">
      <p-button
        icon="pi pi-arrow-left"
        [rounded]="true"
        severity="danger"
        [raised]="true"
        (click)="backToSearch()"
      />
    </div>
    <p-divider class="my-divider">
      <div class="title">
        <h1>Vendas</h1>
      </div>
    </p-divider>

 <div class="filter-section">
  <p-floatlabel class="w-full md:w-56" variant="on">
    <p-select
      size="large"
      inputId="filtrar_por"
      [style]="{ width: '12rem' }"
      [panelStyle]="{ width: '14rem' }"
      [options]="filterOptions"
      [(ngModel)]="selectedFilter"
      (onChange)="onFilterChange()"  
      optionLabel="label" >
       <ng-template let-option pTemplate="item">
    <div class="flex items-center">
      <span class="status-dot mr-3" [ngClass]="option.color"></span>
      <span>{{ option.label }}</span>
    </div>
  </ng-template>

  <ng-template let-value pTemplate="value">
    <div class="flex items-center">
      <span class="status-dot" [ngClass]="value.color" style="margin-right: 5px;"></span>
      <span>{{ value.label }}</span>
    </div>
  </ng-template>

</p-select>

    <label for="filtrar_por">Filtrar por</label>
  </p-floatlabel>
</div>

    

    <div class="contracts-list">
      <!--@if (sales.length === 0) {
      <div class="no-contracts">
        ğŸš« NÃƒO HÃ VENDAS COM ESTE STATUS ğŸš«
      </div>
      } @else { @for (sale of sales; track $index) {-->
      <div class="contract-card">
        
        <div class="contract-info">
          <p-accordion>
            <p-accordion-panel value="0">
              <p-tag
                class="acc-status"
                [severity]="
                  {
                    COMPLETADA: 'success',
                    INSTALACAO: 'secondary',
                    ARQUIVADA: 'info',
                    APROVADA: 'warn'
                  }[contract.situationDescription] || 'secondary'
                "
              ></p-tag>
              <p-accordion-header class="title-accordion"
                >[STATUS] NÂ° Venda ğŸ“œ â†’</p-accordion-header
              >
              <p-accordion-content>
                <div class="addresscontract">
                  <div class="section">
                    <label>ğŸ‘¤ Cliente:</label>
                  </div>

                  <div class="section">
                    <label>ğŸ“ EndereÃ§o:</label>
                  </div>

                  <div class="section">
                    <label>ğŸ˜ï¸ Bairro:</label>
                    <label>ğŸ“ª CEP:</label>
                    <label>ğŸŒ† Cidade:</label>
                  </div>

                  <div class="section">
                    <label>ğŸ’° Valor Bruto:</label>
                    <label>ğŸ’¸ Desconto:</label>
                    <label>ğŸ’µ Valor LÃ­quido:</label>
                  </div>

                  <div class="section">
                    <label>Data da Venda:</label>
                  </div>

                  <div class="section">
                    <label>Data da InstalaÃ§Ã£o:</label>
                  </div>

                  <div class="feedback">
                    <label>ObservaÃ§Ã£o</label>
                    <textarea
                      pTextarea
                      rows="5"
                      cols="60"
                      style="width: 100%"
                      pTextarea
                      id="observacao"
                      style="resize: none"
                      name="observacao"
                      [(ngModel)]="observation"
                      [readonly]="!isEditing"
                      [disabled]="!isEditing || saving"
                    ></textarea>
                  </div>
                </div>
                <div class="confirm">
                  <button
                    pButton
                    type="button"
                    icon="pi pi-check"
                    class="fab p-button-rounded p-button-icon-only"
                    [icon]="
                      saving
                        ? 'pi pi-spinner pi-spin'
                        : isEditing
                        ? 'pi pi-check'
                        : 'pi pi-pencil'
                    "
                    [disabled]="saving"
                    [pTooltip]="
                      saving
                        ? 'Salvando...'
                        : isEditing
                        ? 'Salvar observaÃ§Ã£o'
                        : 'Editar observaÃ§Ã£o'
                    "
                    tooltipPosition="top"
                    [attr.aria-label]="
                      saving
                        ? 'Salvando'
                        : isEditing
                        ? 'Salvar observaÃ§Ã£o'
                        : 'Editar observaÃ§Ã£o'
                    "
                    (click)="onEditButtonClick($event)"
                  ></button>
                </div>
              </p-accordion-content>
            </p-accordion-panel>
          </p-accordion>
          <!-- FIM DO ACCORDION -->
        </div>
      </div>
    </div>
  </app-card-base>
</div>
<p-toast />
