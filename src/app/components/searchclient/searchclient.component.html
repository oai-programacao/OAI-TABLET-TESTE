<div class="page-container">
  <p-toast></p-toast>

  <app-card-base header="Buscar Cliente" width="auto" height="110%">
    <!-- BotÃµes de aÃ§Ã£o no topo -->
    <div class="btn-to-back-leads-content">
      <div class="btn-to-leads">
        <p-button
          label="Sair"
          (onClick)="logout()"
          severity="danger"
          [outlined]="true"
          icon="pi pi-sign-out"
          styleClass="action-btn"
        />
      </div>
      <div class="btn-to-conclude">
        <p-button
          label="Vendas"
          (onClick)="navigateToConcludeSale()"
          icon="pi pi-shopping-cart"
          severity="info"
          badge="2"
          styleClass="action-btn"
        />
      </div>
      <div class="btn-to-logout">
        <p-button
          label="Em Espera"
          (onClick)="navigateToLeads()"
          icon="pi pi-clock"
          severity="warn"
          badge="2"
          styleClass="action-btn"
        />
      </div>
    </div>

    <div class="home-content">
      <!-- SeÃ§Ã£o de boas-vindas -->
      <div class="top-info">
        <h2 class="welcome-title">
          OlÃ¡, <span class="vendedor-nome">{{ vendedorNome }}</span> ðŸ‘‹
        </h2>
        <div class="datetime-badge">
          <i class="pi pi-calendar"></i>
          {{ dataAtual | date : "EEEE, d 'de' MMMM 'de' yyyy" : "" : "pt-BR" }}
          <span class="time-separator">â€¢</span>
          <i class="pi pi-clock"></i>
          {{ horaAtual | date : "HH:mm:ss" }}
        </div>
      </div>

      <div class="motivational-section">
        <div class="motivational-message">
          {{ getCurrentMessage() }}
        </div>
      </div>

      <!-- Cards de mÃ©tricas com Ã­cones -->
      <div class="infotoseller">
        <div class="info-card" *ngFor="let info of infoVendas; let i = index">
          <div class="metric-icon" [class]="'metric-icon-' + i">
            <i [class]="getMetricIcon(i)"></i>
          </div>
          <div class="metric-content">
            <p class="metric-label">{{ info.label }}</p>
            <p class="metric-value">{{ info.value }}</p>
          </div>
        </div>
      </div>

      <!-- FormulÃ¡rio de busca -->
      <form #searchClientForm="ngForm">
        <div class="cpf-section">
          <p-iftalabel variant="on" style="width: 100%">
            <input
              pInputText
              [(ngModel)]="documento"
              name="documento"
              required
              minlength="11"
              maxlength="18"
              placeholder="000.000.000-00"
              (ngModelChange)="formatarDocumento($event)"
              (keypress)="allowOnlyNumbers($event)"
              (paste)="onPaste($event)"
              inputmode="numeric"
              autocomplete="off"
              #docModel="ngModel"
              class="cpf-input"
            />
            <label for="documento">CPF/CNPJ (Somente NÃºmeros)</label>
          </p-iftalabel>

          <app-message-valid-forms
            [control]="docModel"
            error="required"
            text="Para pesquisar um cliente Ã© necessÃ¡rio colocar um documento | CPF/CNPJ |"
          ></app-message-valid-forms>
        </div>

        <div class="actions">
          <p-button
            type="button"
            label="Consultar Cliente"
            icon="pi pi-search"
            severity="info"
            [raised]="true"
            [loading]="isLoading"
            [disabled]="waitApiInsert"
            (onClick)="consultarCliente()"
            styleClass="primary-action-btn"
          ></p-button>

          <p-button
            label="Ver Planos"
            icon="pi pi-list"
            severity="secondary"
            [outlined]="true"
            (onClick)="verPlanos()"
            styleClass="secondary-action-btn"
          ></p-button>
        </div>
      </form>
    </div>
  </app-card-base>
</div>

<p-toast />
